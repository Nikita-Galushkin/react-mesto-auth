{"version":3,"sources":["images/logo-header.svg","images/res.svg","images/rej.svg","images/loader.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/AuthForm.js","components/Login.js","components/Register.js","components/ImagePopup.js","components/Form.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","utils/api.js","components/InfoTooltip.js","utils/auth.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","loggedIn","email","onLogout","pathname","useLocation","linkText","linkPath","className","src","logoImage","alt","onClick","to","Footer","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","item","cardLikeButtonClassName","type","link","name","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","key","AuthForm","title","text","active","children","onSubmit","action","noValidate","Login","onLogin","useState","password","data","setData","handleChange","e","target","value","onChange","placeholder","required","minLength","maxLength","id","preventDefault","Register","onRegister","ImagePopup","isOpen","onClose","Form","isModal","PopupWithForm","EditProfilePopup","onUpdateUser","setName","description","setDescription","useEffect","EditAvatarPopup","onUpdateAvatar","inputRef","useRef","ref","defaultValue","current","AddPlacePopup","inputNameRef","inputLinkRef","ProtectedRoute","Component","component","props","api","options","this","_baseUrl","baseUrl","_headers","headers","fetch","method","then","res","ok","json","Promise","reject","status","statusText","info","body","JSON","stringify","cardId","authorization","InfoTooltip","message","icon","BASE_URL","App","setLoggedIn","setEmail","loader","setMessage","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isImagePopupOpen","setImagePopupOpen","isInfoTooltipOpen","setInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","history","useHistory","handleLogout","localStorage","removeItem","push","closeAllPopups","all","getUserInfo","getInitialsCards","catch","err","console","log","getItem","jwt","token","send","error","Provider","exact","path","handleCardClick","i","changeLikeCardStatus","newCard","newCards","c","removeCard","newArrCards","filter","element","auth","setItem","resolveIcon","rejectIcon","setUserInfo","postCard","setUserAvatar","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.77804b2f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo-header.2b1f7ee5.svg\";","module.exports = __webpack_public_path__ + \"static/media/res.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/rej.4072126c.svg\";","module.exports = __webpack_public_path__ + \"static/media/loader.11ef2b1f.svg\";","import React from 'react';\nimport logoImage from '../images/logo-header.svg';\nimport { Link, useLocation } from 'react-router-dom';\n\nfunction Header({ loggedIn, email, onLogout }) {\n  const { pathname } = useLocation();\n  const linkText = `${pathname === '/signin' ? 'Регистрация' : 'Войти'}`;\n  const linkPath = `${pathname === '/signin' ? '/signup' : '/signin'}`;\n\n  return (\n    <header className=\"header page__header section\">\n      <img className=\"logo header__logo\" src={logoImage} alt=\"Логотип\" />\n      {loggedIn ? (\n        <div className='auth-info'>\n          <span>{email}</span>\n          <button className='auth-info__signout' onClick={onLogout}>Выйти</button>\n        </div>\n        )\n        : (<Link to={linkPath} className=\"link\">{linkText}</Link>)\n      }\n    </header>\n  );\n}\n\nexport default Header;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer page__footer section\">\n      <p className=\"footer__copyright\">\n        &copy; 2020 Mesto Russia\n      </p>\n    </footer>\n  );\n}\n\nexport default Footer;","import React from 'react';\n\nconst CurrentUserContext = React.createContext();\n\nexport default CurrentUserContext;","import React from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = (card.owner._id === currentUser._id);\n  const cardDeleteButtonClassName = (\n    `${isOwn ? 'element__trash_active' : ''}`\n  );\n\n  const isLiked = card.likes.some((item) => item._id === currentUser._id);\n  const cardLikeButtonClassName = (\n    `${isLiked ? 'element__group_active' : ''}`\n  );\n  \n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n  return (\n    <li className=\"element\">\n      <button className=\"element__photo\" type=\"button\" onClick={handleClick}>\n        <img src={card.link} alt=\"фото\" className=\"element__image\" />\n      </button>\n      <div className=\"element__info-container\">\n        <h2 className=\"element__title\">{card.name}</h2>\n        <div className=\"element__like-container\">\n          <button className={`element__group ${cardLikeButtonClassName}`} type=\"button\" onClick={handleLikeClick}></button>\n          <p className=\"element__counter\">{card.likes.length}</p>\n        </div>\n      </div>\n      <button className={`element__trash ${cardDeleteButtonClassName}`} type=\"button\" onClick={handleDeleteClick}></button>\n    </li>\n  )\n}\n\nexport default Card;","import React from 'react';\nimport Card from './Card.js';\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\n\nfunction Main({ onEditAvatar, onEditProfile, onAddPlace, onCardClick, cards, onCardLike, onCardDelete }) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content page__content\">\n      <section className=\"profile section content__section\">\n        <div className=\"profile__info\">\n          <button className=\"profile__image-button\" type=\"button\" onClick={onEditAvatar}>\n            <div className=\"profile__icon\"></div>\n            <img src={currentUser.avatar} alt=\"фото\" className=\"profile__image\" />\n          </button>\n          <div className=\"profile__edit\">\n            <div className=\"profile__text\">\n              <h1 className=\"profile__title\">{currentUser.name}</h1>\n              <p className=\"profile__subtitle\">{currentUser.about}</p>\n            </div>\n            <button className=\"profile__edit-button\" type=\"button\" onClick={onEditProfile}></button>\n          </div>\n        </div>\n        <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace}></button>\n      </section>\n      <section className=\"elements section content__section\">\n        <ul className=\"elements__list\">\n          {cards && cards.map((card) =>\n            <Card \n              key={card._id} \n              card={card} \n              onCardClick={onCardClick}\n              onCardLike={onCardLike}\n              onCardDelete={onCardDelete}\n            />\n          )}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;","import React from 'react';\nimport { Link } from \"react-router-dom\";\n\nfunction AuthForm({ title, text, active, children, onSubmit }) {\n  return (\n    <div className=\"auth\"> \n      <div className=\"auth__container\">\n        <h2 className=\"auth__title\">{title}</h2>\n        <form className=\"auth__form\" onSubmit={onSubmit} action=\"#\" noValidate>\n          {children}\n          <button type=\"submit\" className=\"auth__button\">{text}</button>\n        </form>\n        <p className={`auth__text ${active}`}>Уже зарегистрированы? <Link to=\"/signin\" className=\"auth__link\">Войти</Link></p>\n      </div>\n    </div> \n  );\n}\n\nexport default AuthForm;","import React from 'react';\nimport AuthForm from './AuthForm.js';\n\nfunction Login({ onLogin }) {\n  const [ data, setData ] = React.useState({\n    email: '',\n    password: ''\n  });\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setData({\n      ...data,\n      [name]: value\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    let { email, password } = data;\n    onLogin(email, password);\n  }\n\n  return (\n    <AuthForm \n      title={'Вход'}\n      text={'Войти'}\n      active={''}\n      children={\n        <>\n          <label>\n            <input type=\"email\" value={data.email} className=\"auth__item auth__item_type_email\" name=\"email\" onChange={handleChange} placeholder=\"Email\" required minLength=\"2\" maxLength=\"40\" />\n            <span id=\"email-error\" className=\"auth__item-error\"></span>\n          </label>\n          <label>\n            <input type=\"password\" value={data.password} className=\"auth__item auth__item_type_password\" name=\"password\" onChange={handleChange} placeholder=\"Пароль\" required minLength=\"2\" maxLength=\"200\" />\n            <span id=\"password-error\" className=\"auth__item-error\"></span>\n          </label>\n        </>\n      }\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default Login;","import React from 'react';\nimport AuthForm from './AuthForm.js';\n\nfunction Register({ onRegister }) {\n  const [ data, setData ] = React.useState({\n    email: '',\n    password: ''\n  });\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setData({\n      ...data,\n      [name]: value\n    });\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    let { email, password } = data;\n    onRegister(email, password);\n  }\n\n\n  return (\n    <AuthForm \n      title={'Регистрация'}\n      text={'Зарегистрироваться'}\n      active={'auth__text_active'}\n      children={\n        <>\n          <label>\n            <input type=\"email\" value={data.email} className=\"auth__item auth__item_type_email\" name=\"email\" onChange={handleChange} placeholder=\"Email\" required minLength=\"2\" maxLength=\"40\" />\n            <span id=\"email-error\" className=\"auth__item-error\"></span>\n          </label>\n          <label>\n            <input type=\"password\" value={data.password} className=\"auth__item auth__item_type_password\" name=\"password\" onChange={handleChange} placeholder=\"Пароль\" required minLength=\"2\" maxLength=\"200\" />\n            <span id=\"password-error\" className=\"auth__item-error\"></span>\n          </label>\n        </>\n      }\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default Register;","import React from 'react';\n\nfunction ImagePopup({ card, isOpen, onClose }) {\n  return (\n    <div className={`modal modal_type_photo ${isOpen ? 'modal_opened' : ''}`}>\n      <div className=\"modal__container-photo\">\n        <button className=\"modal__close-button modal__close-button_type_photo\" type=\"button\" onClick={onClose}></button>\n        <img src={card.link} alt={card.name} className=\"modal__photo\" />\n        <p className=\"modal__text\">{card.name}</p>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;","import React from 'react';\n\nfunction Form({ isModal, name, title, children, text, onSubmit }) {\n  return (\n    <>\n      {\n        isModal && (<h2 className=\"modal__title\">{title}</h2>)\n      }\n      <form className=\"modal__form\" onSubmit={onSubmit} action=\"#\" name={`modal_${name}_form`} noValidate>\n        {children}\n        {\n          isModal && (<button type=\"submit\" className=\"modal__button modal__button_action\">{text}</button>)\n        }\n      </form>\n    </>\n  );\n}\n\nexport default Form;","import React from 'react';\nimport Form from './Form';\n\nfunction PopupWithForm({ isModal, name, title, children, text, isOpen, onClose, onSubmit }) {\n  return (\n    <div className={`modal modal_type_${name} ${isOpen ? 'modal_opened' : ''}`}>\n      <div className=\"modal__container\">\n        <button className=\"modal__close-button\" type=\"button\" onClick={onClose}></button>\n        <Form\n          isModal={isModal}\n          name={name}\n          title={title}\n          children={children}\n          text={text}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  return (\n    <PopupWithForm\n      name={'edit-profile'} \n      title={'Редактировать профиль'} \n      children={\n        <>\n          <label>\n            <input type=\"text\" value={name || ''} onChange={handleChangeName} className=\"modal__item modal__item_type_name\" name=\"name\" placeholder=\"ФИО\" required minLength=\"2\" maxLength=\"40\" />\n            <span id=\"name-error\" className=\"modal__item-error\"></span>\n          </label>\n          <label>\n            <input type=\"text\" value={description || ''} onChange={handleChangeDescription} className=\"modal__item modal__item_type_profession\" name=\"about\" placeholder=\"Профессия\" required minLength=\"2\" maxLength=\"200\" />\n            <span id=\"about-error\" className=\"modal__item-error\"></span>\n          </label>\n        </>\n      } \n      text={'Сохранить'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const inputRef = React.useRef('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateAvatar({\n      avatar: inputRef.current.value\n    });\n  } \n\n  return (\n    <PopupWithForm \n      name={'update-avatar'} \n      title={'Обновить аватар'} \n      children={\n        <>\n          <label>\n            <input ref={inputRef} type=\"url\" className=\"modal__item modal__item_type_avatar\" name=\"avatar\" defaultValue=\"\" placeholder=\"Ссылка на фото\" required />\n            <span id=\"avatar-error\" className=\"modal__item-error\"></span>\n          </label>\n        </>\n      } \n      text={'Сохранить'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default EditAvatarPopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n  const inputNameRef = React.useRef('');\n  const inputLinkRef = React.useRef('');\n  \n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onAddPlace({\n      name: inputNameRef.current.value,\n      link: inputLinkRef.current.value\n    });\n  } \n\n  return (\n    <PopupWithForm \n      name={'add-card'} \n      title={'Новое место'} \n      children={\n        <>\n          <label>\n            <input ref={inputNameRef} type=\"text\" className=\"modal__item modal__item_type_place\" name=\"name\" defaultValue=\"\" placeholder=\"Название\" required minLength=\"1\" maxLength=\"30\" />\n            <span id=\"name-error\" className=\"modal__item-error\"></span>\n          </label>\n          <label>\n            <input ref={inputLinkRef} type=\"url\" className=\"modal__item modal__item_type_link-place\" name=\"link\" defaultValue=\"\" placeholder=\"Ссылка на картинку\" required />\n            <span id=\"link-error\" className=\"modal__item-error\"></span>\n          </label>\n        </>\n      } \n      text={'Создать'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n\nexport default AddPlacePopup;","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nfunction ProtectedRoute({ component: Component, ...props  }) {\n  return (\n    <Route>\n      {\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"./login\" />\n      }\n    </Route>\n  );\n}\n\nexport default ProtectedRoute;","class Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  getInitialsCards() {\n    return fetch(`${this._baseUrl}cards`, {\n      method: 'GET',\n      headers: this._headers,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\n    });\n  } \n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'GET',\n      headers: this._headers,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\n    });\n  }\n\n  setUserInfo(info) {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(info)\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\n    });\n  }\n\n  setUserAvatar(link) {\n    return fetch(`${this._baseUrl}users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(link)\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\n    });\n  }\n\n  postCard(card) {\n    return fetch(`${this._baseUrl}cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify(card)\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\n    });\n  }\n\n  removeCard(id) {\n    return fetch(`${this._baseUrl}cards/${id}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\n    });\n  }\n\n  changeLikeCardStatus(cardId, status) {\n    return fetch(`${this._baseUrl}cards/likes/${cardId}`, {\n      method: (status) ? 'PUT' : 'DELETE',\n      headers: this._headers,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status} - ${res.statusText}`);\n    });\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-15/',\n  headers: {\n    authorization: 'fa7c1664-18f3-41d8-b132-37b50e07ed81',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction InfoTooltip({ isOpen, onClose, message }) {\n  return (\n    <PopupWithForm\n      isModal={false}\n      name={'auth'}\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <img src={message.icon} alt='Иконка авторизации' className='modal__tooltip-icon' />\n      <p className='modal__tooltip-text'>{message.text}</p>\n    </PopupWithForm>\n  );\n}\n\nexport default InfoTooltip;","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password })\n  })\n  .then((res) => res.ok \n  ? res.json() \n  : res.status(400).send({ message: 'некорректно заполнено одно из полей' }));\n};\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password })\n  })\n  .then((res) => {\n    if (res.status === 400) {\n      res.status(400).res.send({ message: 'Не передано одно из полей' });\n    }\n    else if (res.status === 401) {\n      res.status(401).res.send({ message: 'Пользователь с таким email не найден' });\n    }\n    return res.json();\n  });\n};\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  })\n  .then((res) => {\n    if (!res.ok) {\n      return res.json()\n        .then((err) => {\n          res.status(401).res.send(err.message);\n        });\n    }\n    return res.json()\n  })\n};","import React from 'react';\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\nimport Header from './Header.js';\nimport Footer from './Footer.js';\nimport Main from './Main.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ImagePopup from './ImagePopup.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport api from '../utils/api.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport * as auth from '../utils/auth.js';\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\nimport resolveIcon from '../images/res.svg';\nimport rejectIcon from '../images/rej.svg';\nimport loader from '../images/loader.svg';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [message, setMessage] = React.useState({\n    icon: loader,\n    text: ''\n  });\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const history = useHistory();\n\n  function handleLogin(email, password) {\n    auth.authorize(email, password)\n      .then((data) => {\n        localStorage.setItem('jwt', data.token);\n        setEmail(email);\n        setLoggedIn(true);\n        history.push('/');\n      })\n      .catch((err) => {\n        console.error({ message: err.message });\n      });\n  }\n\n  function handleRegister(email, password) {\n    auth.register(email, password)\n      .then((data) => {\n        if(data) {\n          localStorage.setItem('jwt', data.jwt);\n          setEmail(data.data.email);\n        }\n        setLoggedIn(true);\n        history.push('/');\n        setMessage({ \n          icon: resolveIcon, \n          text: 'Вы успешно зарегистрировались!' \n        });\n      })\n      .catch((err) => {\n        console.error({ message: err.message });\n        setMessage({ \n          icon: rejectIcon, \n          text: 'Что-то пошло не так! Попробуйте ещё раз.' \n        });\n      });\n    setInfoTooltipOpen(true);\n  }\n\n  function handleLogout() {\n    localStorage.removeItem('jwt');\n    setEmail('');\n    setLoggedIn(false);\n    history.push('/signup');\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setImagePopupOpen(false);\n    setInfoTooltipOpen(false);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setImagePopupOpen(true);\n  }\n\n  function handleUpdateUser(info) {\n    api.setUserInfo(info)\n      .then((info) => {\n        setCurrentUser(info);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleUpdateAvatar(link) {\n    api.setUserAvatar(link)\n        .then((link) => {\n          setCurrentUser(link);\n          closeAllPopups();\n        })\n        .catch((err) => console.log(err));\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleCardDelete(card) {\n    api.removeCard(card._id)\n      .then(() => {\n        const newArrCards = cards.filter(element => element !== card);\n        setCards(newArrCards);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.postCard(card)\n      .then((card) => {\n        setCards([...cards, card]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  React.useEffect(() => {\n    Promise.all([ api.getUserInfo(), api.getInitialsCards() ])\n      .then(([ info, data ]) => {\n        setCurrentUser(info);\n        setCards(data);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  React.useEffect(() => {\n    if (localStorage.getItem('jwt')) {\n      const jwt = localStorage.getItem('jwt');\n      auth.getContent(jwt)\n        .then((res) => {\n          if (res){\n            setEmail(res.data.email);\n            }\n            setLoggedIn(true);\n            history.push('/');\n        })\n        .catch((err) => {\n          console.error({ message: err.message });\n        });\n    }\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <div className=\"page\">\n          <div className=\"page__container\">\n            <Header\n            loggedIn={loggedIn}\n            email={email}\n            onLogout={handleLogout}\n            />\n            <Switch>\n              <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} handleLogout={handleLogout} component={Main}\n                onEditAvatar={() => {\n                  handleEditAvatarClick();\n                }}\n                onEditProfile={() => {\n                  handleEditProfileClick();\n                }}\n                onAddPlace={() => {\n                  handleAddPlaceClick();\n                }}\n                onCardClick={(card) => {\n                  handleCardClick(card);\n                }}\n                cards={cards}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n              />\n              <Route path='/signin'>\n                <Login \n                  onLogin={handleLogin}\n                />\n              </Route>\n              <Route path='/signup'>\n                <Register \n                  onRegister={handleRegister}\n                />\n              </Route>\n              <Route>\n                {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signup\" />}\n              </Route>\n            </Switch>\n            <Footer />\n          </div>\n          <InfoTooltip\n            isOpen={isInfoTooltipOpen}\n            onClose={closeAllPopups}\n            message={message}\n          />\n          <EditProfilePopup \n            isOpen={isEditProfilePopupOpen} \n            onClose={closeAllPopups} \n            onUpdateUser={handleUpdateUser} \n          />\n          <AddPlacePopup \n            isOpen={isAddPlacePopupOpen} \n            onClose={closeAllPopups} \n            onAddPlace={handleAddPlaceSubmit} \n          />\n          <PopupWithForm \n            name={'confirm'} \n            title={'Вы уверены?'} \n            text={'Да'}\n          />\n          <EditAvatarPopup \n            isOpen={isEditAvatarPopupOpen} \n            onClose={closeAllPopups} \n            onUpdateAvatar={handleUpdateAvatar} \n          /> \n          <ImagePopup \n            card={selectedCard}\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}